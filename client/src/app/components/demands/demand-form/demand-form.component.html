<div class="max-w-4xl mx-auto py-6 sm:px-6 lg:px-8">
  <!-- Page header -->
  <div class="md:flex md:items-center md:justify-between mb-8">
    <div class="flex-1 min-w-0">
      <h2 class="text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate">
        {{ isEditMode ? 'Edit Demand' : 'Create New Demand' }}
      </h2>
    </div>
    <div class="mt-4 flex md:mt-0 md:ml-4">
      <button (click)="goBack()" class="btn-secondary">
        Cancel
      </button>
    </div>
  </div>

  <!-- Demand Form -->
  <form [formGroup]="demandForm" (ngSubmit)="onSubmit()" class="space-y-6">
    <div class="card">
      <div class="card-header">
        <h3 class="text-lg leading-6 font-medium text-gray-900">Basic Information</h3>
      </div>
      <div class="card-body">
        <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
          <div>
            <label for="demandId" class="block text-sm font-medium text-gray-700">Demand ID *</label>
            <input 
              type="text" 
              id="demandId"
              formControlName="demandId"
              class="form-input mt-1"
              placeholder="e.g., DEM001">
            <div *ngIf="demandForm.get('demandId')?.invalid && demandForm.get('demandId')?.touched" 
                 class="mt-1 text-sm text-red-600">
              Demand ID is required
            </div>
          </div>

          <div>
            <label for="accountName" class="block text-sm font-medium text-gray-700">Account Name *</label>
            <input 
              type="text" 
              id="accountName"
              formControlName="accountName"
              class="form-input mt-1"
              placeholder="Enter account name">
            <div *ngIf="demandForm.get('accountName')?.invalid && demandForm.get('accountName')?.touched" 
                 class="mt-1 text-sm text-red-600">
              Account name is required
            </div>
          </div>

          <div>
            <label for="projectName" class="block text-sm font-medium text-gray-700">Project Name *</label>
            <input 
              type="text" 
              id="projectName"
              formControlName="projectName"
              class="form-input mt-1"
              placeholder="Enter project name">
            <div *ngIf="demandForm.get('projectName')?.invalid && demandForm.get('projectName')?.touched" 
                 class="mt-1 text-sm text-red-600">
              Project name is required
            </div>
          </div>

          <div>
            <label for="positionTitle" class="block text-sm font-medium text-gray-700">Position Title *</label>
            <input 
              type="text" 
              id="positionTitle"
              formControlName="positionTitle"
              class="form-input mt-1"
              placeholder="e.g., Senior Developer, Project Manager">
            <div *ngIf="demandForm.get('positionTitle')?.invalid && demandForm.get('positionTitle')?.touched" 
                 class="mt-1 text-sm text-red-600">
              Position title is required
            </div>
          </div>

          <div>
            <label for="priority" class="block text-sm font-medium text-gray-700">Priority</label>
            <select 
              id="priority"
              formControlName="priority"
              class="form-select mt-1">
              <option value="Low">Low</option>
              <option value="Medium">Medium</option>
              <option value="High">High</option>
              <option value="Critical">Critical</option>
            </select>
          </div>

          <div>
            <label for="status" class="block text-sm font-medium text-gray-700">Status</label>
            <select 
              id="status"
              formControlName="status"
              class="form-select mt-1">
              <option value="Open">Open</option>
              <option value="In Progress">In Progress</option>
              <option value="Fulfilled">Fulfilled</option>
              <option value="Closed">Closed</option>
            </select>
          </div>

          <div>
            <label for="location" class="block text-sm font-medium text-gray-700">Location</label>
            <input 
              type="text" 
              id="location"
              formControlName="location"
              class="form-input mt-1"
              placeholder="e.g., New York, Remote">
          </div>
        </div>
      </div>
    </div>

    <!-- Skills & Experience Section -->
    <div class="card">
      <div class="card-header">
        <h3 class="text-lg leading-6 font-medium text-gray-900">Skills & Experience Requirements</h3>
      </div>
      <div class="card-body">
        <div class="grid grid-cols-1 gap-6 sm:grid-cols-3 mb-6">
          <div>
            <label for="primarySkill" class="block text-sm font-medium text-gray-700">Primary Skill *</label>
            <input 
              type="text" 
              id="primarySkill"
              formControlName="primarySkill"
              class="form-input mt-1"
              placeholder="e.g., JavaScript, Python, Java">
            <div *ngIf="demandForm.get('primarySkill')?.invalid && demandForm.get('primarySkill')?.touched" 
                 class="mt-1 text-sm text-red-600">
              Primary skill is required
            </div>
          </div>

          <div>
            <label for="minExperience" class="block text-sm font-medium text-gray-700">Min Experience (Years) *</label>
            <input 
              type="number" 
              id="minExperience"
              formControlName="minExperience"
              min="0"
              class="form-input mt-1"
              placeholder="e.g., 3">
            <div *ngIf="demandForm.get('minExperience')?.invalid && demandForm.get('minExperience')?.touched" 
                 class="mt-1 text-sm text-red-600">
              <span *ngIf="demandForm.get('minExperience')?.errors?.['required']">Minimum experience is required</span>
              <span *ngIf="demandForm.get('minExperience')?.errors?.['min']">Experience cannot be negative</span>
            </div>
          </div>

          <div>
            <label for="maxExperience" class="block text-sm font-medium text-gray-700">Max Experience (Years) *</label>
            <input 
              type="number" 
              id="maxExperience"
              formControlName="maxExperience"
              min="0"
              class="form-input mt-1"
              placeholder="e.g., 8">
            <div *ngIf="demandForm.get('maxExperience')?.invalid && demandForm.get('maxExperience')?.touched" 
                 class="mt-1 text-sm text-red-600">
              <span *ngIf="demandForm.get('maxExperience')?.errors?.['required']">Maximum experience is required</span>
              <span *ngIf="demandForm.get('maxExperience')?.errors?.['min']">Experience cannot be negative</span>
            </div>
          </div>
        </div>

        <!-- Secondary Skills -->
        <div>
          <div class="flex justify-between items-center mb-4">
            <label class="block text-sm font-medium text-gray-700">Secondary Skills (Optional)</label>
            <button type="button" (click)="addSecondarySkill()" class="btn-secondary">
              Add Skill
            </button>
          </div>

          <div formArrayName="secondarySkills" class="space-y-3">
            <div *ngFor="let skill of secondarySkillsArray.controls; let i = index" 
                 class="flex items-center space-x-3">
              <div class="flex-1">
                <input 
                  type="text" 
                  [formControlName]="i"
                  class="form-input"
                  placeholder="Skill name">
              </div>
              <button type="button" (click)="removeSecondarySkill(i)" class="text-red-600 hover:text-red-800">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
                </svg>
              </button>
            </div>
          </div>

          <div *ngIf="secondarySkillsArray.length === 0" class="text-sm text-gray-500 italic">
            No secondary skills added yet. Click "Add Skill" to add secondary skills.
          </div>
        </div>
      </div>
    </div>

    <!-- Timeline Section -->
    <div class="card">
      <div class="card-header">
        <h3 class="text-lg leading-6 font-medium text-gray-900">Timeline</h3>
      </div>
      <div class="card-body">
        <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
          <div>
            <label for="startDate" class="block text-sm font-medium text-gray-700">Start Date *</label>
            <input 
              type="date" 
              id="startDate"
              formControlName="startDate"
              class="form-input mt-1">
            <div *ngIf="demandForm.get('startDate')?.invalid && demandForm.get('startDate')?.touched" 
                 class="mt-1 text-sm text-red-600">
              Start date is required
            </div>
          </div>

          <div>
            <label for="endDate" class="block text-sm font-medium text-gray-700">End Date (Optional)</label>
            <input 
              type="date" 
              id="endDate"
              formControlName="endDate"
              class="form-input mt-1">
          </div>
        </div>
      </div>
    </div>

    <!-- Description Section -->
    <div class="card">
      <div class="card-header">
        <h3 class="text-lg leading-6 font-medium text-gray-900">Additional Details</h3>
      </div>
      <div class="card-body">
        <div>
          <label for="description" class="block text-sm font-medium text-gray-700">Description</label>
          <textarea 
            id="description"
            formControlName="description"
            rows="4"
            class="form-input mt-1"
            placeholder="Provide additional details about the role, responsibilities, and requirements..."></textarea>
        </div>
      </div>
    </div>

    <!-- Error Display -->
    <div *ngIf="error" class="rounded-md bg-red-50 p-4">
      <div class="flex">
        <div class="ml-3">
          <h3 class="text-sm font-medium text-red-800">
            {{ error }}
          </h3>
        </div>
      </div>
    </div>

    <!-- Form Actions -->
    <div class="flex justify-end space-x-3">
      <button type="button" (click)="goBack()" class="btn-secondary">
        Cancel
      </button>
      <button 
        type="submit" 
        [disabled]="loading || demandForm.invalid"
        class="btn-primary">
        <span *ngIf="loading" class="spinner mr-2"></span>
        {{ isEditMode ? 'Update Demand' : 'Create Demand' }}
      </button>
    </div>
  </form>
</div>